# PUBG 매칭 시스템은 정말로 공정한가?

## 매칭 시스템이란?

**매칭 시스템(Matchmaking System)**: 온라인 게임에서 플레이어들을 자동으로 매칭시켜 게임을 진행할 수 있도록 하는 시스템

### 매칭 시스템의 목표
- **공정성**: 비슷한 실력의 플레이어끼리 매칭하여 균형 잡힌 경기 제공
- **효율성**: 빠른 매칭 시간으로 대기 시간 최소화

### 일반적인 매칭 방식
- **실력 기반 매칭(SBMM - Skill-Based Matchmaking)**: 플레이어의 실력 점수나 랭크를 기준으로 매칭
- **무작위 매칭**: 실력과 상관없이 무작위로 플레이어들을 배치 - 오래 기다릴 필요가 없음
- **혼합 방식**: 실력과 대기 시간을 모두 고려한 절충안

### 매칭 시스템의 중요성
- 플레이어간 격차가 크면 게임에 충분한 재미를 느낄 수 없어 유저 이탈로 이어짐
- 매칭 대기 시간이 너무 길어져도 플레이어가 게임 한 판을 하기 위해 많은 시간을 소비해야하므로 유저 플레이 시간 감소

---

## PUBG (PlayerUnknown's Battlegrounds) 게임 소개

### 게임 개요
**PUBG**는 100명의 플레이어가 하나의 맵에서 생존을 위해 경쟁하는 **배틀로얄** 장르의 대표 게임. 게임이 시작되면 모든 플레이어가 비행기에서 낙하산으로 맵에 착륙하여, 무기와 장비를 수집하며 마지막 1명(또는 1팀)이 남을 때까지 싸우는 것이 목표

### 핵심 게임 메커니즘
- **플레이어 수**: 최대 **100명**이 한 게임에 참여
- **맵 축소**: 시간이 지나면서 **안전지대**가 점점 줄어들어 플레이어들을 강제로 접근시킴
- **순위 시스템**: 최종 생존 순서에 따라 1위부터 100위까지 순위가 결정됨
- **장비 수집**: 맵 곳곳에 있는 무기, 방어구, 회복 아이템 등을 획득해야 함

### 매칭 시스템 특징
기본적으로 솔로는 솔로끼리만, 듀오는 듀오끼리만, 스쿼드는 스쿼드끼리만 매칭. 각 모드끼리 분리되어 운영된다.

## 매칭 모드별 특징

### 솔로 모드 (Solo)
- **구성**: 1명씩 최대 100명이 개별적으로 경쟁
- **특징**: 순수한 개인 실력으로만 승부
- **목표**: 마지막 1명까지 생존

### 듀오 모드 (Duo)
- **구성**: 2명씩 팀을 이뤄 최대 50개 팀(100명)이 경쟁
- **특징**: 팀원과의 협력, 의사소통, 전략적 플레이 가능
- **목표**: 마지막 1개 팀까지 생존

### 스쿼드 모드 (Squad)
- **구성**: 4명씩 팀을 이뤄 최대 25개 팀(100명)이 경쟁
- **특징**: 더 복잡한 팀워크와 역할 분담 필요
- **목표**: 마지막 1개 팀까지 생존

---

## 문제 : PUBG의 매칭 시스템은 모든 플레이어에게 공정한 매칭을 제공하는가? 

**주요 문제**: PUBG의 솔로, 듀오, 스쿼드 모드 중 어떤 모드가 가장 공정한 매칭을 제공하는가?

**세부 문제**:
1. **모드별 실력 분산**: 각 모드에서 같은 매치 내 플레이어들의 실력 편차는 얼마나 다른가?
2. **매칭 품질 비교**: 솔로/듀오/스쿼드 중 어떤 모드가 가장 균등한 매칭을 제공하는가?
3. **팀 구성의 영향**: 듀오와 스쿼드에서 팀 내 실력 차이가 전체 매칭 공정성에 미치는 영향은?

---

## 데이터셋 획득 방법

### 1. 공공 Dataset 사용
- **출처**: Kaggle >> [PUBG Match Deaths](https://www.kaggle.com/datasets/skihikingkevin/pubg-match-deaths)  

#### **[주요 Attributes]**  
- **date**: 게임 진행 날짜
- **match_id**: 매치 고유 식별자
- **match_mode**: 게임 모드 (solo, duo, squad)
- **party_size**: 파티 크기 (1=솔로, 2=듀오, 4=스쿼드)
- **player_kills**: 킬 수
- **player_dmg**: 총 데미지
- **player_survive_time**: 생존 시간 (초)
- **player_dist_ride**: 차량 이동 거리
- **player_dist_walk**: 도보 이동 거리
- **player_assists**: 플레이어 어시스트 수
- **team_id**: 팀 식별자
- **team_placement**: 팀 최종 순위 (1위~100위)

### 2. PUBG.API 사용
- **출처**:  [PUBG API DOCUMENTATION](https://documentation.pubg.com/en/introduction.html)  

#### **[공식 게임사에서 제공하는 API]**
- 공공 데이터에 비해 가장 최신 데이터 사용 가능
- 원하는 Attribute에 대해 자료를 모두 얻을 수 있다.
- 데이터 수집하는데 많은 시간이 걸림
---
# 매칭 공정성 분석 방법론

## 1: 플레이어 실력 측정 및 분류(그룹화)

### 1.1 실력 점수 산출 - Linear Regression

**목적**: 다양한 게임 지표를 토대로 각 플레이어의 실력 점수 측정

**방법**:
- Linear Regression 모델을 사용해 킬 수, 데미지, 생존 시간 등을 입력(x)으로 하여 게임 순위(y = label)을 예측
- 학습된 모델의 가중치를 최적 가중치(w)로 사용
- 최적 가중치를 적용하여 각 플레이어의 최종 실력 점수 산출
- [각 플레이어의 Rank Rating 값을 얻을 수 있는 경우에는 입력에 추가]

```
입력 데이터 (X)
플레이어A: [킬 5, 데미지800, 생존시간1500초, 이동거리3000m,]
플레이어B: [킬 1, 데미지200, 생존시간300초, 이동거리800m,  ]  
플레이어C: [킬 3, 데미지600, 생존시간1200초, 이동거리2500m ]
...
라벨 데이터 (y)
플레이어A: 순위 5등
플레이어B: 순위 85등
플레이어C: 순위 25등
...
Linear Regression 학습 결과
학습된 모델:
순위 = -3.2×킬 + (-0.015)×데미지 + (-0.02)×생존시간 + (-0.001)×이동거리 + (-1.5)×어시스트 + 100

최적 가중치(w):
- 킬: 3.2
- 데미지: 0.015  
- 생존시간: 0.02
- 이동거리: 0.001
- 어시스트: 1.5

실력 점수 계산
- 플레이어A:
예측순위 = -3.2×5 + (-0.015)×800 + (-0.02)×1500 + (-0.001)×3000 + (-1.5)×2 + 100
        = -16 - 12 - 30 - 3 - 3 + 100 = 36등

실력점수 = 101 - 36 = 65점

- 플레이어B:  
예측순위 = -3.2×1 + (-0.015)×200 + (-0.02)×300 + (-0.001)×800 + (-1.5)×0 + 100
        = -3.2 - 3 - 6 - 0.8 - 0 + 100 = 87등

실력점수 = 101 - 87 = 14점
```
### 1.2 실력 그룹 분류 - K-Means

**목적**: 플레이어를 실력에 따라 k개의 클러스터로 분류

**방법**: 
- K-Means 클러스터링을 사용하여 실력 점수를 기반으로 플레이어를 k개 그룹으로 분류

**활용**: 매치마다 각 클러스터의 플레이어들이 얼마나 균등하게 섞여있는지 측정
```
매치 #123의 100명 플레이어:
- 클러스터 1: 15명
- 클러스터 2: 18명  
- 클러스터 3: 22명
- 클러스터 4: 25명
- 클러스터 5: 20명

→ 비교적 골고루 분포 = 공정한 매칭
불공정한 매치 예시:
매치 #456:
- 클러스터 1: 5명
- 클러스터 2: 10명
- 클러스터 3: 15명  
- 클러스터 4: 40명
- 클러스터 5: 30명

→ 높은 실력의 유저가 비교적으로 많음 = 불공정한 매칭
```

---

## 2: 모드별 매칭 공정성 분석 - Random Forest

### 2.1 모드 별 매칭 공정성 분석

**목적**: 모든 모드(솔로/듀오/스쿼드)의 매칭 공정성을 동일한 기준으로 분석

**방법**: Random Forest를 사용하여 매치가 공정한지 불공정한지 이진 분류

**입력 특성**:
- **모드 타입** (one-hot encoding: solo, duo, squad)
- **매치 내 실력 분산** (표준편차)
- **최고-최저 실력 점수 차이**
- **평균 실력 점수**
- **실력 그룹별 분포 균등성**
- **팀 내 실력 차이** (듀오/스쿼드만)
- **팀 간 평균 실력 차이** (듀오/스쿼드만)
- **팀 구성 밸런스 지수** (듀오/스쿼드만)

```
나무 #1 (Tree 1)
                     실력분산 ≤ 20?
                    /              \
                 YES/                \NO
                   /                  \
              팀내차이 ≤ 15?           불공정(0)
             /            \
          YES/              \NO  
            /                \
        공정(1)            최고최저차이 ≤ 45?
                          /              \
                       YES/                \NO
                         /                  \
                    공정(1)              불공정(0)
```
```
나무 #2 (Tree 2)
                  최고최저차이 ≤ 50?
                 /                \
              YES/                  \NO
                /                    \
           모드=솔로?                불공정(0)
          /         \
       YES/           \NO
         /             \
     공정(1)        팀간차이 ≤ 12?
                   /           \
                YES/             \NO
                  /               \
              공정(1)           불공정(0)
```

**출력**: 매칭 공정성 (공정=1, 불공정=0) 또는 예측 확률
```
매치 #123에 대해 100개 나무가 투표:
- 85개 나무: "공정하다!" (1)
- 15개 나무: "불공정하다!" (0)

공정 확률 = 85/100 = 0.85 (85%)
불공정 확률 = 15/100 = 0.15 (15%)
```

### 2.2 Random Forest를 선택한 이유

- 어떤 요소가 중요한지 자동으로 알려줌
  - 학습 후 각 특성의 중요도를 자동 계산해줌 : "실력 분산이 35% 중요, 팀 구성이 25% 중요" 같은 구체적 수치 제공
  - 어떤 요소를 개선해야 매칭이 더 공정해질지 알 수 있음

- 복잡한 관계도 찾아냄

  - 조건부 규칙 생성 가능 : "실력 차이가 크면서 동시에 스쿼드 모드일 때 더 불공정하다"
  - 단순한 평균이나 선형 관계로는 놓칠 수 있는 복합적 패턴 발견

- 모든 모드를 똑같은 방법으로 비교 가능
  - 하나의 모델에 모든 모드 데이터를 넣고 학습
  - 동일한 기준으로 "솔로 78점, 듀오 65점, 스쿼드 52점" 같은 공정한 비교 가능능

- 정확도가 높고 안정적
  - 나무 1개는 실수할 수 있지만, 100개가 투표하면 실수 확률 대폭 감소
  - 데이터가 조금 바뀌어도 결과가 크게 흔들리지 않음
---

## 3: 모드 간 공정성 비교 및 분석

### 3.1 모드별 공정성 점수 계산

**방법**: Random Forest 모델의 예측 확률을 공정성 점수로 활용

**계산**:
- 각 매치에 대해 공정성 확률 (0~1) 산출
- 모드별 평균 공정성 점수 계산
- 0~100 스케일로 변환 (선택)

**예시**:
```
솔로 매치들:
매치1: 0.85, 매치2: 0.72, 매치3: 0.91, ...
→ 솔로 평균: 0.78 (78점)

듀오 매치들:  
매치10: 0.65, 매치11: 0.59, 매치12: 0.71, ...
→ 듀오 평균: 0.65 (65점)

스쿼드 매치들:
매치20: 0.52, 매치21: 0.48, 매치22: 0.56, ...  
→ 스쿼드 평균: 0.52 (52점)
```

### 3.2 특성 중요도 분석

**목적**: 각 모드에서 공정성에 영향을 미치는 주요 요인 식별

**예시**:
```
특성 순서: [실력분산, 팀내차이, 모드타입, 최고최저차이, 기타]
중요도:   [0.35,    0.25,   0.20,   0.15,      0.05]

→ 실력분산이 35%로 가장 중요!
```

### 3.3 모드별 상세 분석(선택)

**방법**: 모드별로 데이터를 분리하여 개별 Random Forest 모델 학습

**목적**:
- 각 모드별 고유한 공정성 영향 요인 발견
- 모드별 개선 포인트 제시

---